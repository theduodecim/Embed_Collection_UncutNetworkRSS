{"version":3,"file":"myMarketComponent.js","sourceRoot":"","sources":["myMarketComponent.ts"],"names":[],"mappings":"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","sourcesContent":["class MyMarketComponent extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this.render(); // Call render initially\n  }\n\n  static get observedAttributes(): string[] {\n    return ['collection'];\n  }\n\n  attributeChangedCallback(name: string, oldValue: string | null, newValue: string | null): void {\n    if (name === 'collection') {\n      this.render(); // Re-render when the attribute changes\n    }\n  }\n\n  async render(): Promise<void> {\n    const shadow = this.shadowRoot!;\n    shadow.innerHTML = `\n      <style>\n        * {\n          box-sizing: border-box;\n        }\n\n        :host {\n          display: block;\n          font-family: Arial, sans-serif;\n        }\n\n        .grid-container {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 20px;\n          padding: 20px;\n          background-color: #f9f9f9;\n          border: 1px solid #ddd;\n          border-radius: 10px;\n        }\n\n        .card {\n          border: 1px solid #ddd;\n          border-radius: 10px;\n          overflow: hidden;\n          background-color: #fff;\n          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n          transition: transform 0.2s ease-in-out;\n          cursor: pointer;\n          text-decoration: none;\n          color: inherit;\n          display: block;\n        }\n\n        .card:hover {\n          transform: scale(1.05);\n        }\n\n        .card img {\n          width: 100%;\n          height: auto;\n          display: block;\n        }\n\n        .card-content {\n          padding: 15px;\n        }\n\n        .card-content h3 {\n          margin: 0 0 10px;\n          font-size: 1.2em;\n          color: #333;\n        }\n\n        .card-content p {\n          margin: 0;\n          font-size: 1em;\n          color: #666;\n        }\n\n        .collection-title {\n          text-align: center;\n          font-size: 1.5em;\n          margin-bottom: 20px;\n          padding: 10px;\n          background-color: #f0f0f0;\n          border: 1px solid #ddd;\n          border-radius: 10px;\n        }\n      </style>\n      <div>\n        <div class=\"grid-container\" id=\"content\">\n          <p>Loading data...</p>\n        </div>\n      </div>\n    `;\n\n    try {\n      const collectionId: string = this.getAttribute('collection') || 'Default';\n      const response = await fetch(`https://uncut.network/api/rss?collection_id=${collectionId}`);\n      const text = await response.text();\n      const parser = new DOMParser();\n      const xmlDoc = parser.parseFromString(text, 'text/xml');\n      const items = xmlDoc.querySelectorAll('item');\n\n      // Extract the first <title> for collection name\n      let collectionTitle: string =\n        xmlDoc.querySelector('channel > title')?.textContent?.replace(/<!\\[CDATA\\[(.*?)\\]\\]>/, '$1') || 'Unknown Collection';\n\n      // Ensure there's only one collection title div\n      let collectionTitleDiv = shadow.querySelector<HTMLDivElement>('#collection-title');\n      if (!collectionTitleDiv) {\n        collectionTitleDiv = document.createElement('div');\n        collectionTitleDiv.id = 'collection-title';\n        collectionTitleDiv.classList.add('collection-title');\n        shadow.prepend(collectionTitleDiv);\n      }\n      collectionTitleDiv.textContent = `Collection: ${collectionTitle}`;\n\n      // Clear previous content\n      const contentDiv = shadow.querySelector<HTMLDivElement>('#content');\n      if (contentDiv) {\n        contentDiv.innerHTML = '';\n\n        // Create cards for each item\n        items.forEach(item => {\n          const title: string =\n            item.querySelector('title')?.textContent?.replace(/<!\\[CDATA\\[(.*?)\\]\\]>/, '$1') || 'No Title';\n          const description: string =\n            item.querySelector('description')?.textContent?.replace(/<!\\[CDATA\\[(.*?)\\]\\]>/, '$1') || 'No Description';\n          const imageUrl: string =\n            item.querySelector('enclosure')?.getAttribute('url') || 'https://via.placeholder.com/300x200?text=No+Image';\n          const link: string = \n            item.querySelector('link')?.textContent?.trim() || '#';\n\n          // Create a clickable card\n          const card = document.createElement('a');\n          card.classList.add('card');\n          card.href = link;\n          card.target = \"_blank\"; // Open in a new tab\n          card.rel = \"noopener noreferrer\"; // Security best practice\n          card.innerHTML = `\n            <img src=\"${imageUrl}\" alt=\"${title}\" />\n            <div class=\"card-content\">\n              <h3>${title}</h3>\n              <p>${description}</p>\n            </div>\n          `;\n          contentDiv.appendChild(card);\n        });\n      }\n    } catch (error) {\n      const contentDiv = shadow.querySelector<HTMLDivElement>('#content');\n      if (contentDiv) {\n        contentDiv.innerHTML = '<p>Error loading RSS data.</p>';\n      }\n    }\n  }\n}\n\ncustomElements.define('my-market', MyMarketComponent);\n"]}